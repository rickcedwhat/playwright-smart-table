#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ðŸš§ Running build and docs generation..."
# Check for changelog updates if version bumped
node scripts/check-version-bump.mjs
if [ $? -ne 0 ]; then
  exit 1
fi

npm run build

# Add all generated/modified files to the commit
git add dist README.md src/typeContext.ts

# Check if npm run build was successful before committing
if [ $? -ne 0 ]; then
  echo "Build failed, commit aborted."
  exit 1
fi
